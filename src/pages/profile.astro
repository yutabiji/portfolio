---
import BaseLayout from '../layouts/BaseLayout.astro';
import SectionTitle from '../components/SectionTitle.astro';
import { getCollection, render } from 'astro:content';

const profileEntries = await getCollection('profile');
const profileEntry = profileEntries[0];
const { data } = profileEntry;
const { Content } = await render(profileEntry);
---

<BaseLayout title="Profile" description={`${data.name}のプロフィール`}>
  <section class="max-w-5xl mx-auto px-4 py-20">
    <SectionTitle title="Profile" subtitle="プロフィール" />

    <div class="flex justify-end mb-8">
      <a
        href="/print/"
        class="inline-flex items-center gap-2 px-5 py-2.5 bg-stone-900 text-white text-sm font-semibold tracking-wider hover:bg-stone-700 transition-colors"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 9V2h12v7M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2M6 14h12v8H6v-8z" />
        </svg>
        PDF
      </a>
    </div>

    <div class="grid md:grid-cols-3 gap-12">
      <!-- Photo -->
      <div class="md:col-span-1">
        <div class="aspect-[3/4] bg-stone-200 flex items-center justify-center text-stone-400">
          {data.photo ? (
            <img src={`${data.photo}`} alt={data.name} class="w-full h-full object-cover" />
          ) : (
            <span class="text-sm">Photo</span>
          )}
        </div>
      </div>

      <!-- Info -->
      <div class="md:col-span-2">
        <h3 class="text-3xl font-bold text-stone-900 mb-1">{data.name}</h3>
        {data.nameEn && (
          <p class="text-sm text-stone-400 tracking-wider mb-6">{data.nameEn}</p>
        )}

        <table class="w-full text-sm mb-8">
          <tbody>
            {data.birthday && (
              <tr class="border-b border-stone-100">
                <td class="py-3 text-stone-400 w-32">生年月日</td>
                <td class="py-3 text-stone-800">{data.birthday}</td>
              </tr>
            )}
            {data.birthplace && (
              <tr class="border-b border-stone-100">
                <td class="py-3 text-stone-400 w-32">出身</td>
                <td class="py-3 text-stone-800">{data.birthplace}</td>
              </tr>
            )}
            {data.height && (
              <tr class="border-b border-stone-100">
                <td class="py-3 text-stone-400 w-32">身長</td>
                <td class="py-3 text-stone-800">{data.height}</td>
              </tr>
            )}
            {data.sizes && (
              <tr class="border-b border-stone-100">
                <td class="py-3 text-stone-400 w-32">サイズ</td>
                <td class="py-3 text-stone-800">{data.sizes}</td>
              </tr>
            )}
            {data.bloodType && (
              <tr class="border-b border-stone-100">
                <td class="py-3 text-stone-400 w-32">血液型</td>
                <td class="py-3 text-stone-800">{data.bloodType}</td>
              </tr>
            )}
            {data.agency && (
              <tr class="border-b border-stone-100">
                <td class="py-3 text-stone-400 w-32">所属</td>
                <td class="py-3 text-stone-800">
                  {data.agencyUrl ? (
                    <a href={data.agencyUrl} target="_blank" rel="noopener noreferrer" class="underline hover:text-stone-600">
                      {data.agency}
                    </a>
                  ) : (
                    data.agency
                  )}
                </td>
              </tr>
            )}
            {data.skills && data.skills.length > 0 && (
              <tr class="border-b border-stone-100">
                <td class="py-3 text-stone-400 w-32">特技</td>
                <td class="py-3 text-stone-800">{data.skills.join('、')}</td>
              </tr>
            )}
            {data.qualifications && data.qualifications.length > 0 && (
              <tr class="border-b border-stone-100">
                <td class="py-3 text-stone-400 w-32">資格</td>
                <td class="py-3 text-stone-800">{data.qualifications.join('、')}</td>
              </tr>
            )}
            {data.hobbies && data.hobbies.length > 0 && (
              <tr class="border-b border-stone-100">
                <td class="py-3 text-stone-400 w-32">趣味</td>
                <td class="py-3 text-stone-800">{data.hobbies.join('、')}</td>
              </tr>
            )}
          </tbody>
        </table>

        <!-- Bio from markdown body -->
        <div class="prose prose-stone max-w-none">
          <Content />
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
