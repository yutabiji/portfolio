---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const worksData = await getCollection('works');
const recentWorks = worksData[0]?.data.works.slice(0, 3) ?? [];

const profileEntries = await getCollection('profile');
const profile = profileEntries[0]?.data;
---

<BaseLayout title="Home">
  <!-- Hero Section -->
  <section class="relative bg-stone-900 text-white overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-b from-stone-900/70 to-stone-900/90"></div>
    <div class="relative max-w-5xl mx-auto px-4 py-32 md:py-48 text-center">
      <p class="text-sm tracking-[0.3em] uppercase text-stone-300 mb-4">Actor</p>
      <h1 class="text-5xl md:text-7xl font-bold tracking-wider mb-6">{profile?.nameEn ?? profile?.name}</h1>
      <p class="text-lg text-stone-300 mb-4">{profile?.name}</p>
      <p class="text-stone-400 max-w-lg mx-auto leading-relaxed">
        映画・ドラマ・CMを中心に活動する女優。
      </p>
      <div class="mt-10 flex gap-4 justify-center">
        <a
          href="/profile/"
          class="px-8 py-3 bg-white text-stone-900 text-sm font-semibold tracking-wider uppercase hover:bg-stone-100 transition-colors"
        >
          Profile
        </a>
        <a
          href="/works/"
          class="px-8 py-3 border border-white/30 text-white text-sm font-semibold tracking-wider uppercase hover:bg-white/10 transition-colors"
        >
          Works
        </a>
      </div>
    </div>
  </section>

  <!-- Recent Works Section -->
  <section class="max-w-5xl mx-auto px-4 py-20">
    <div class="text-center mb-12">
      <h2 class="text-3xl font-bold tracking-wide text-stone-900">Recent Works</h2>
      <div class="mt-4 w-12 h-0.5 bg-stone-900 mx-auto"></div>
    </div>

    <div class="grid md:grid-cols-3 gap-8">
      {recentWorks.map((work) => (
        <div class="bg-white p-6 border border-stone-200 hover:shadow-md transition-shadow">
          <span class="text-xs font-semibold tracking-wider uppercase text-stone-400">
            {work.category}
          </span>
          <h3 class="mt-2 text-lg font-bold text-stone-900">
            {work.url ? (
              <a href={work.url} target="_blank" rel="noopener noreferrer" class="underline decoration-stone-300 underline-offset-2 hover:decoration-stone-600 transition-colors">
                {work.title}
                <svg class="inline w-3.5 h-3.5 ml-1 text-stone-400" viewBox="0 0 20 20" fill="currentColor"><path d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z" /></svg>
              </a>
            ) : (
              work.title
            )}
          </h3>
          {work.role && <p class="mt-1 text-sm text-stone-600">{work.role}</p>}
          <p class="mt-2 text-xs text-stone-400">{work.year}</p>
        </div>
      ))}
    </div>

    <div class="text-center mt-10">
      <a
        href="/works/"
        class="text-sm tracking-wider uppercase text-stone-600 hover:text-stone-900 transition-colors border-b border-stone-300 pb-1"
      >
        View All Works
      </a>
    </div>
  </section>
</BaseLayout>
