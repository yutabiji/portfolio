---
import BaseLayout from '../layouts/BaseLayout.astro';
import SectionTitle from '../components/SectionTitle.astro';
import { getCollection } from 'astro:content';

const galleryData = await getCollection('gallery');
const images = galleryData[0]?.data.images ?? [];
---

<BaseLayout title="Gallery" description="ギャラリー・宣材写真">
  <section class="max-w-5xl mx-auto px-4 py-20">
    <SectionTitle title="Gallery" subtitle="ギャラリー" />

    {images.length > 0 ? (
      <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
        {images.map((image) => (
          <div class="group relative aspect-square bg-stone-200 overflow-hidden cursor-pointer">
            <img
              src={`/portfolio${image.src}`}
              alt={image.alt}
              class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
              loading="lazy"
            />
            <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors flex items-end">
              <div class="p-4 text-white opacity-0 group-hover:opacity-100 transition-opacity">
                <p class="text-sm font-semibold">{image.alt}</p>
                {image.category && <p class="text-xs text-stone-300">{image.category}</p>}
              </div>
            </div>
          </div>
        ))}
      </div>
    ) : (
      <div class="text-center py-20">
        <p class="text-stone-400">写真は準備中です。</p>
      </div>
    )}
  </section>
</BaseLayout>
